{% extends "base.html" %}

{% block content %}
<style>
  .login-page-wrap {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem 1rem 3rem;
    position: relative;
    min-height: calc(100vh - 120px);
  }

  .cassette-bg {
    position: absolute;
    inset: 0;
    pointer-events: none;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0.05;
    z-index: 0;
  }

  .login-card-stack {
    position: relative;
    width: 100%;
    max-width: 430px;
    z-index: 5;
  }

  .login-card-stack::before,
  .login-card-stack::after {
    content: '';
    position: absolute;
    inset: 0;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 4px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.4);
  }

  .login-card-stack::before {
    transform: rotate(-1.5deg) translate(6px, 4px);
  }

  .login-card-stack::after {
    transform: rotate(1.2deg) translate(-4px, 3px);
  }

  .login-card {
    position: relative;
    background: var(--panel);
    border: 1.5px solid var(--border);
    border-radius: 4px;
    padding: 2.4rem;
    z-index: 1;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
  }

  .login-tape-label {
    background: linear-gradient(180deg, #c4a962, #a8883c);
    color: #12100e;
    font-family: 'Special Elite', Georgia, serif;
    font-size: 0.72rem;
    letter-spacing: 0.18em;
    text-align: center;
    padding: 0.35rem 1rem;
    margin: -2.4rem -2.4rem 1.8rem;
    border-bottom: 1px solid #7a5e18;
    text-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);
  }

  .login-title {
    font-family: 'Playfair Display', Georgia, serif !important;
    font-weight: 900;
    color: var(--text) !important;
    text-align: center;
    font-size: 2rem;
    margin-bottom: 0.3rem;
    text-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
  }

  .login-subtitle {
    text-align: center;
    font-size: 0.8rem;
    color: var(--text-muted);
    letter-spacing: 0.12em;
    margin-bottom: 1.8rem;
  }

  @keyframes tracking-flicker {
    0% {
      opacity: 0;
      transform: scaleX(1.02);
      filter: blur(1px);
    }

    40% {
      opacity: 0.5;
    }

    100% {
      opacity: 1;
      transform: scaleX(1);
      filter: blur(0);
    }
  }

  .login-form-area {
    animation: tracking-flicker 0.8s ease-out forwards;
  }

  .login-lemon {
    position: fixed;
    bottom: 2rem;
    right: 2rem;
    opacity: 0.35;
    pointer-events: none;
    z-index: 4;
    animation: lemon-blink 8s 2s infinite;
  }

  @keyframes lemon-blink {

    0%,
    90%,
    100% {
      transform: scale(1);
    }

    92% {
      transform: scaleY(0.1) scaleX(1.1);
    }

    94% {
      transform: scale(1);
    }
  }
</style>

<div class="login-page-wrap">
  <div class="cassette-bg" aria-hidden="true">
    <svg viewBox="0 0 520 280" xmlns="http://www.w3.org/2000/svg" style="max-width:500px; width:80vw;">
      <rect x="10" y="20" width="500" height="240" rx="18" fill="#3b2a1e" />
      <rect x="30" y="40" width="460" height="200" rx="10" fill="#2a1e10" />
      <circle cx="160" cy="140" r="70" fill="#2a1e10" stroke="#3b2a1e" stroke-width="4" />
      <circle cx="160" cy="140" r="40" fill="#1e1a16" />
      <circle cx="160" cy="140" r="20" fill="#c4a962" />
      <circle cx="160" cy="140" r="8" fill="#12100e" />
      <line x1="160" y1="100" x2="160" y2="120" stroke="#c4a962" stroke-width="3" />
      <line x1="180" y1="107" x2="170" y2="124" stroke="#c4a962" stroke-width="3" />
      <circle cx="360" cy="140" r="70" fill="#2a1e10" stroke="#3b2a1e" stroke-width="4" />
      <circle cx="360" cy="140" r="40" fill="#1e1a16" />
      <circle cx="360" cy="140" r="20" fill="#c4a962" />
      <circle cx="360" cy="140" r="8" fill="#12100e" />
      <line x1="360" y1="100" x2="360" y2="120" stroke="#c4a962" stroke-width="3" />
      <line x1="380" y1="107" x2="370" y2="124" stroke="#c4a962" stroke-width="3" />
      <rect x="220" y="80" width="80" height="50" rx="4" fill="#2f8f9d" opacity="0.3" />
      <text x="260" y="270" text-anchor="middle" font-family="Courier Prime, monospace" font-size="14" fill="#c4a962"
        letter-spacing="6">SIDE A</text>
    </svg>
  </div>

  <div class="login-card-stack">
    <div class="login-card">
      <div class="login-tape-label">▶ INSERT TAPE · SIDE A ◀</div>
      <h1 class="login-title">{% trans %}Login{% endtrans %}</h1>
      <p class="login-subtitle">TRACKING… PLEASE AUTHENTICATE</p>

      <div class="login-form-area">
        {% include "components/errors.html" %}
        {% if integrations.mlc() %}
        <a class="btn btn-secondary btn-lg w-100 mb-3" href="{{ url_for('auth.oauth_login') }}">Login with Major League
          Cyber</a>
        <hr>
        {% endif %}
        {% with form = Forms.auth.LoginForm() %}
        <form method="post" accept-charset="utf-8">
          <div class="mb-3">
            <b>{{ form.name.label(class="form-label") }}</b>
            {{ form.name(class="form-control", value=name, autocomplete="username email") }}
          </div>
          <div class="mb-3">
            <b>{{ form.password.label(class="form-label") }}</b>
            {{ form.password(class="form-control", value=password, autocomplete="current-password") }}
          </div>
          <div class="row pt-3">
            <div class="col-6 col-md-8">
              <a class="align-middle" style="font-size:0.82rem;" href="{{ url_for('auth.reset_password') }}">{% trans
                %}Forgot your password?{% endtrans %}</a>
            </div>
            <div class="col-6 col-md-4">
              {{ form.submit(class="btn btn-block btn-primary w-100") }}
            </div>
          </div>
          {{ form.nonce() }}
        </form>
        {% endwith %}
      </div>
    </div>
  </div>

  <div class="login-lemon" aria-hidden="true">
    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="46" viewBox="0 0 28 32">
      <ellipse cx="14" cy="17" rx="10" ry="11" fill="#c4a962" stroke="#3b2a1e" stroke-width="1.5" />
      <ellipse cx="14" cy="7" rx="4" ry="6" fill="#c4a962" stroke="#3b2a1e" stroke-width="1" />
      <circle cx="11" cy="17" r="1.8" fill="#12100e" />
      <circle cx="17" cy="17" r="1.8" fill="#12100e" />
      <path d="M10,22 Q14,25 18,22" stroke="#12100e" stroke-width="1.2" fill="none" stroke-linecap="round" />
    </svg>
  </div>
</div>
{% endblock %}